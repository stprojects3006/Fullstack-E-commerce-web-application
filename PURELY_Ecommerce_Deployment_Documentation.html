<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>DEPLOYMENT_DOCUMENTATION</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.2.0/github-markdown.min.css" />
</head>
<body>
<h1 id="purely-e-commerce-application---deployment-documentation">PURELY
E-commerce Application - Deployment Documentation</h1>
<h2 id="overview">Overview</h2>
<p>This document provides comprehensive documentation for the PURELY
E-commerce microservices application, including all fixes,
configurations, and deployment procedures implemented during development
and troubleshooting.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ol type="1">
<li><a href="#system-architecture">System Architecture</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#build-and-deployment">Build and Deployment</a></li>
<li><a href="#key-fixes-and-configurations">Key Fixes and
Configurations</a></li>
<li><a href="#service-configuration-details">Service Configuration
Details</a></li>
<li><a href="#monitoring-setup">Monitoring Setup</a></li>
<li><a href="#troubleshooting-guide">Troubleshooting Guide</a></li>
<li><a href="#aws-ec2-deployment">AWS EC2 Deployment</a></li>
</ol>
<h2 id="system-architecture">System Architecture</h2>
<h3 id="microservices-stack">Microservices Stack</h3>
<ul>
<li><strong>Service Registry</strong>: Eureka Server (Port 8761)</li>
<li><strong>API Gateway</strong>: Spring Cloud Gateway (Port 8081)</li>
<li><strong>Auth Service</strong>: User authentication and JWT
management</li>
<li><strong>User Service</strong>: User profile management</li>
<li><strong>Category Service</strong>: Product category management</li>
<li><strong>Product Service</strong>: Product catalog management</li>
<li><strong>Cart Service</strong>: Shopping cart functionality</li>
<li><strong>Order Service</strong>: Order processing and management</li>
<li><strong>Notification Service</strong>: Email notifications</li>
</ul>
<h3 id="frontend">Frontend</h3>
<ul>
<li><strong>React Application</strong>: Modern SPA with Vite build
system</li>
<li><strong>Nginx</strong>: Reverse proxy and static file serving</li>
</ul>
<h3 id="monitoring-stack">Monitoring Stack</h3>
<ul>
<li><strong>Prometheus</strong>: Metrics collection</li>
<li><strong>Grafana</strong>: Metrics visualization</li>
<li><strong>Promtail</strong>: Log aggregation</li>
<li><strong>Blackbox Exporter</strong>: Endpoint monitoring</li>
<li><strong>Node Exporter</strong>: System metrics</li>
</ul>
<h3 id="database">Database</h3>
<ul>
<li><strong>MongoDB</strong>: Primary data store</li>
</ul>
<h2 id="prerequisites">Prerequisites</h2>
<h3 id="required-software">Required Software</h3>
<ul>
<li>Java 17 (OpenJDK)</li>
<li>Maven 3.8+</li>
<li>Docker &amp; Docker Compose</li>
<li>Node.js 18+ (for frontend build)</li>
</ul>
<h3 id="system-requirements">System Requirements</h3>
<ul>
<li>Minimum 4GB RAM</li>
<li>20GB free disk space</li>
<li>Ports: 80, 8081, 8761, 27017, 9090, 3000, 9113, 9115, 9100</li>
</ul>
<h2 id="build-and-deployment">Build and Deployment</h2>
<h3 id="automated-deployment">Automated Deployment</h3>
<p>The application includes comprehensive deployment scripts:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Full deployment (builds and starts everything)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">./deploy.sh</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Build JARs only</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="ex">./build-jars-only.sh</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Build frontend only</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> frontend <span class="kw">&amp;&amp;</span> <span class="ex">npm</span> run build</span></code></pre></div>
<h3 id="manual-deployment-steps">Manual Deployment Steps</h3>
<ol type="1">
<li><p><strong>Build Microservices</strong>:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./build-jars-only.sh</span></span></code></pre></div></li>
<li><p><strong>Build Frontend</strong>:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> frontend</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run build</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ..</span></code></pre></div></li>
<li><p><strong>Start Services</strong>:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">-d</span></span></code></pre></div></li>
</ol>
<h2 id="key-fixes-and-configurations">Key Fixes and Configurations</h2>
<h3 id="java-version-compatibility">1. Java Version Compatibility</h3>
<p><strong>Issue</strong>: Java version conflicts between Java 24 and
project requirements <strong>Solution</strong>: - Uninstalled all Java
versions - Installed OpenJDK 17 - Updated all <code>pom.xml</code> files
to use Java 17 and Maven compiler plugin 3.12.1</p>
<h3 id="api-gateway-configuration">2. API Gateway Configuration</h3>
<p><strong>Issue</strong>: Missing web dependencies and CORS
configuration <strong>Solution</strong>: - Added
<code>spring.main.web-application-type=reactive</code> to
application.yml - Replaced servlet-based <code>CorsFilter</code> with
reactive <code>CorsWebFilter</code> - Removed conflicting
<code>spring-boot-starter-web</code> dependency</p>
<h3 id="eureka-service-registration">3. Eureka Service Registration</h3>
<p><strong>Issue</strong>: Services not registering with Eureka due to
hardcoded IP addresses <strong>Solution</strong>: - Updated all
microservices to use Docker service names instead of IP addresses -
Configured Eureka client URLs to use service names:
<code>yaml   eureka:     client:       serviceUrl:         defaultZone: http://service-registry:8761/eureka/</code></p>
<h3 id="frontend-api-configuration">4. Frontend API Configuration</h3>
<p><strong>Issue</strong>: Frontend configured for production API URLs
<strong>Solution</strong>: - Updated
<code>frontend/src/api-service/apiConfig.jsx</code> to use localhost
URLs - Configured for development environment</p>
<h3 id="nginx-configuration">5. Nginx Configuration</h3>
<p><strong>Issue</strong>: Static file serving and API routing problems
<strong>Solution</strong>: - Fixed MIME type configuration for
JavaScript files - Corrected API upstream service names - Disabled
caching to prevent stale content - Added proper proxy_pass
configurations</p>
<h3 id="authentication-and-user-management">6. Authentication and User
Management</h3>
<p><strong>Issue</strong>: User creation not automated after signup
<strong>Solution</strong>: - Added user creation endpoint in user
service - Automated user creation in frontend after successful
verification - Fixed token handling in cart and order services</p>
<h3 id="cart-service-token-handling">7. Cart Service Token Handling</h3>
<p><strong>Issue</strong>: “Cannot read properties of null (reading
‘token’)” error <strong>Solution</strong>: - Updated cart and order
services to get user data dynamically from localStorage - Fixed static
user variable initialization that caused stale data issues</p>
<h2 id="service-configuration-details">Service Configuration
Details</h2>
<h3 id="api-gateway-application.yml">API Gateway (application.yml)</h3>
<div class="sourceCode" id="cb5"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spring</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">main</span><span class="kw">:</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">web-application-type</span><span class="kw">:</span><span class="at"> reactive</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">cloud</span><span class="kw">:</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">gateway</span><span class="kw">:</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">routes</span><span class="kw">:</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> auth-service</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">uri</span><span class="kw">:</span><span class="at"> lb://auth-service</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">predicates</span><span class="kw">:</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="kw">-</span><span class="at"> Path=/auth-service/**</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> user-service</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">uri</span><span class="kw">:</span><span class="at"> lb://user-service</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">predicates</span><span class="kw">:</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="kw">-</span><span class="at"> Path=/user-service/**</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">        # ... other service routes</span></span></code></pre></div>
<h3 id="auth-service-security">Auth Service Security</h3>
<div class="sourceCode" id="cb6"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Configuration</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="at">@EnableWebSecurity</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> SecurityConfig <span class="op">{</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Bean</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> SecurityFilterChain <span class="fu">filterChain</span><span class="op">(</span>HttpSecurity http<span class="op">)</span> <span class="kw">throws</span> <span class="bu">Exception</span> <span class="op">{</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>        http</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">csrf</span><span class="op">(</span>csrf <span class="op">-&gt;</span> csrf<span class="op">.</span><span class="fu">disable</span><span class="op">())</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">authorizeHttpRequests</span><span class="op">(</span>auth <span class="op">-&gt;</span> auth</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">requestMatchers</span><span class="op">(</span><span class="st">&quot;/auth/**&quot;</span><span class="op">).</span><span class="fu">permitAll</span><span class="op">()</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">requestMatchers</span><span class="op">(</span><span class="st">&quot;/actuator/**&quot;</span><span class="op">).</span><span class="fu">permitAll</span><span class="op">()</span>  <span class="co">// Health checks</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">anyRequest</span><span class="op">().</span><span class="fu">authenticated</span><span class="op">()</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>            <span class="op">);</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> http<span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="frontend-api-configuration-1">Frontend API Configuration</h3>
<div class="sourceCode" id="cb7"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">// frontend/src/api-service/apiConfig.jsx</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> API_BASE_URL <span class="op">=</span> <span class="st">&#39;http://localhost:8081&#39;</span><span class="op">;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="im">default</span> API_BASE_URL<span class="op">;</span></span></code></pre></div>
<h3 id="nginx-configuration-1">Nginx Configuration</h3>
<pre class="nginx"><code># Static file serving with correct MIME types
location ~* \.(js|mjs)$ {
    add_header Content-Type application/javascript;
}

# API routing
location /api/ {
    proxy_pass http://api-gateway:8081/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
}</code></pre>
<h2 id="monitoring-setup">Monitoring Setup</h2>
<h3 id="prometheus-configuration">Prometheus Configuration</h3>
<ul>
<li><strong>Location</strong>:
<code>prometheus/prometheus.yml</code></li>
<li><strong>Targets</strong>: All microservices, nginx, blackbox
exporter</li>
<li><strong>Scrape interval</strong>: 15s</li>
</ul>
<h3 id="grafana-configuration">Grafana Configuration</h3>
<ul>
<li><strong>Default credentials</strong>: admin/admin</li>
<li><strong>Dashboards</strong>: Pre-configured for microservices
monitoring</li>
<li><strong>Data source</strong>: Prometheus</li>
</ul>
<h3 id="log-aggregation">Log Aggregation</h3>
<ul>
<li><strong>Promtail</strong>: Collects application logs</li>
<li><strong>Configuration</strong>:
<code>prometheus/promtail-config.yml</code></li>
</ul>
<h2 id="troubleshooting-guide">Troubleshooting Guide</h2>
<h3 id="common-issues-and-solutions">Common Issues and Solutions</h3>
<ol type="1">
<li><strong>Services Not Starting</strong>
<ul>
<li>Check Docker logs:
<code>docker-compose logs [service-name]</code></li>
<li>Verify port availability</li>
<li>Check service dependencies</li>
</ul></li>
<li><strong>Frontend Blank Page</strong>
<ul>
<li>Clear browser cache</li>
<li>Check nginx logs: <code>docker-compose logs nginx</code></li>
<li>Verify static files are served correctly</li>
</ul></li>
<li><strong>API Gateway 404 Errors</strong>
<ul>
<li>Check Eureka registration: http://localhost:8761</li>
<li>Verify service health endpoints</li>
<li>Check route configurations</li>
</ul></li>
<li><strong>Authentication Issues</strong>
<ul>
<li>Verify JWT token format</li>
<li>Check auth service logs</li>
<li>Ensure user exists in both auth and user services</li>
</ul></li>
<li><strong>Cart/Order Issues</strong>
<ul>
<li>Check user session in localStorage</li>
<li>Verify token is valid and not expired</li>
<li>Check service communication logs</li>
</ul></li>
</ol>
<h3 id="health-check-endpoints">Health Check Endpoints</h3>
<ul>
<li>Service Registry: http://localhost:8761</li>
<li>API Gateway: http://localhost:8081/actuator/health</li>
<li>Auth Service: http://localhost:8082/actuator/health</li>
<li>Product Service: http://localhost:8084/actuator/health</li>
<li>Cart Service: http://localhost:8085/actuator/health</li>
<li>Order Service: http://localhost:8086/actuator/health</li>
</ul>
<h2 id="aws-ec2-deployment">AWS EC2 Deployment</h2>
<h3 id="ec2-instance-setup">EC2 Instance Setup</h3>
<ol type="1">
<li><p><strong>Launch EC2 Instance</strong>:</p>
<ul>
<li>AMI: Amazon Linux 2 or Ubuntu 20.04+</li>
<li>Instance Type: t3.medium or larger</li>
<li>Security Groups: Open ports 80, 443, 22, 8081, 8761</li>
</ul></li>
<li><p><strong>Install Dependencies</strong>:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update system</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum update <span class="at">-y</span>  <span class="co"># Amazon Linux</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt upgrade <span class="at">-y</span>  <span class="co"># Ubuntu</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Java 17</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install java-17-amazon-corretto <span class="at">-y</span>  <span class="co"># Amazon Linux</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install openjdk-17-jdk <span class="at">-y</span>  <span class="co"># Ubuntu</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Docker</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install docker <span class="at">-y</span>  <span class="co"># Amazon Linux</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install docker.io docker-compose <span class="at">-y</span>  <span class="co"># Ubuntu</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Start and enable Docker</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl start docker</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable docker</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> usermod <span class="at">-aG</span> docker <span class="va">$USER</span></span></code></pre></div></li>
<li><p><strong>Deploy Application</strong>:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clone repository</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone <span class="op">&lt;</span>repository-url<span class="op">&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ecommerce-web-application</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Run deployment script</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="ex">./deploy.sh</span></span></code></pre></div></li>
</ol>
<h3 id="production-considerations">Production Considerations</h3>
<ol type="1">
<li><strong>SSL/TLS</strong>: Configure HTTPS with Let’s Encrypt</li>
<li><strong>Domain</strong>: Point domain to EC2 public IP</li>
<li><strong>Database</strong>: Consider using managed MongoDB
service</li>
<li><strong>Monitoring</strong>: Set up CloudWatch for additional
monitoring</li>
<li><strong>Backup</strong>: Implement automated backup strategies</li>
</ol>
<h3 id="environment-variables">Environment Variables</h3>
<p>For production deployment, consider using environment variables for:
- Database connection strings - JWT secrets - Email service credentials
- API keys</p>
<h2 id="sample-data-import">Sample Data Import</h2>
<p>The application includes sample data for testing:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import categories</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="ex">mongoimport</span> <span class="at">--db</span> purely_category_service <span class="at">--collection</span> categories <span class="at">--file</span> <span class="st">&quot;sample data/purely_category_service.categories.json&quot;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Import products</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="ex">mongoimport</span> <span class="at">--db</span> purely_product_service <span class="at">--collection</span> products <span class="at">--file</span> <span class="st">&quot;sample data/purely_product_service.products.json&quot;</span></span></code></pre></div>
<h2 id="performance-optimization">Performance Optimization</h2>
<h3 id="frontend-1">Frontend</h3>
<ul>
<li>Vite build system for fast development and optimized production
builds</li>
<li>Code splitting and lazy loading</li>
<li>Optimized static asset serving</li>
</ul>
<h3 id="backend">Backend</h3>
<ul>
<li>Connection pooling for database connections</li>
<li>Caching strategies for frequently accessed data</li>
<li>Load balancing through Eureka service discovery</li>
</ul>
<h3 id="monitoring">Monitoring</h3>
<ul>
<li>Real-time metrics collection</li>
<li>Automated alerting for service health</li>
<li>Performance dashboards</li>
</ul>
<h2 id="security-considerations">Security Considerations</h2>
<ol type="1">
<li><strong>JWT Token Management</strong>: Secure token storage and
validation</li>
<li><strong>CORS Configuration</strong>: Properly configured for
production domains</li>
<li><strong>Input Validation</strong>: Server-side validation for all
inputs</li>
<li><strong>HTTPS</strong>: SSL/TLS encryption for all
communications</li>
<li><strong>Database Security</strong>: Secure MongoDB
configuration</li>
</ol>
<h2 id="support-and-maintenance">Support and Maintenance</h2>
<h3 id="regular-maintenance-tasks">Regular Maintenance Tasks</h3>
<ol type="1">
<li><strong>Log Rotation</strong>: Configure log rotation for
application logs</li>
<li><strong>Database Maintenance</strong>: Regular MongoDB
maintenance</li>
<li><strong>Security Updates</strong>: Keep dependencies updated</li>
<li><strong>Backup Verification</strong>: Test backup and restore
procedures</li>
</ol>
<h3 id="monitoring-alerts">Monitoring Alerts</h3>
<ul>
<li>Service health monitoring</li>
<li>Error rate tracking</li>
<li>Performance metrics</li>
<li>Resource utilization</li>
</ul>
<hr />
<p><strong>Document Version</strong>: 1.0<br />
<strong>Last Updated</strong>: December 2024<br />
<strong>Contact</strong>: stprojects3006@gmail.com</p>
<p>This documentation covers all the fixes, configurations, and
deployment procedures implemented during the development and
troubleshooting of the PURELY E-commerce application.</p>
</body>
</html>
